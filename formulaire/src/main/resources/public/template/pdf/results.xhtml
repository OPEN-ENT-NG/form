<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
    <title>Résultats</title>
    <style type="text/css">
        body {
            font-family: "Roboto", sans-serif;
            color: #5b6472;
            font-size: 13px;
        }
        .page {
            display: block;
            margin: 5% 3%;
        }
        @page {
            size: A4;
            margin: 5% 3%;

            @bottom-center{
                content: counter(page) ' / ' counter(pages);
                font-family: "Roboto", sans-serif;
                font-weight: bold;
                color: #5b6472;
                font-size: 13px;
            }
        }


        .one { width: 8.33333%; }
        .two { width: 16.66667%; }
        .three { width: 25%; }
        .four { width: 33.33333%; }
        .five { width: 41.66667%; }
        .six { width: 50%; }
        .seven { width: 58.33333%; }
        .eight { width: 66.66667%; }
        .nine { width: 75%; }
        .ten { width: 83.33333%; }
        .eleven { width: 91.66667%; }
        .twelve { width: 100%; }
        .flex { display: flex; }
        h1 {
            color: #4bafd5;
            text-align: center;
        }
        h2 {
            text-align: center;
            margin-bottom: 10%;
        }
        h4 {
            font-size: 18px;
            font-weight: bold;
        }
        .question, .section {
            margin-bottom: 10%;
        }
        .section {
            border: thin solid #e9ebef;
        }
        .section h4.top {
            background-color: #2a9bc7;
            color: white;
            margin: 0 !important;
            padding: 5px 10px;
        }
        .section .description {
            padding: 5px 10px;
        }
        .response {
            display: flex;
            padding: 5px 10px;
            margin: 5px 0;
            font-size: 14px;
            border: thin solid #e9ebef;
        }
        h5.graph-subtitle {
            font-size: 14px;
            font-style: italic;
        }
        .inline {
            display: inline-block;
        }
        .nobreakpage {
            page-break-inside: avoid;
        }
    </style>
</head>

<body class="page">
    <h1 class="title">{{form_title}}</h1>
    <h2>Nombre de réponses : {{nbResponseTot}}</h2>

    {{#form_elements}}
        {{#is_question}}
            <div class="question nobreakpage">
                <h4>
                    {{title}}{{#mandatory}}<span style="color:red;margin-left:10px">*</span>{{/mandatory}}
                </h4>

                {{#question_type}}
                <div class="main">
                    {{#type_freetext}}
                    <div class="response">{{{statement}}}</div>
                    {{/type_freetext}}

                    {{#type_text}}
                    {{#responses}}
                    <div class="response">
                        {{^anonymous}}
                        <span class="eight inline">
                                <span class="four inline">{{date_response}}</span>
                                <span class="inline">{{responder_name}}</span>
                            </span>
                        {{/anonymous}}
                        {{#anonymous}}
                        <span class="four inline">{{date_response}}</span>
                        {{/anonymous}}
                        <span>
                            {{#filename}}{{filename}}{{/filename}}
                            {{^filename}}{{{answer}}}{{/filename}}
                        </span>
                    </div>
                    {{/responses}}
                    {{/type_text}}

                    {{#type_graph}}
                        <div class="response">
                            <span><img src="{{graphData}}" alt="Graph"/></span>
                        </div>
                        {{#is_cursor}}
                        <h5 class="graph-subtitle">Moyenne des réponses : {{cursor_average}}</h5>
                        {{/is_cursor}}
                        {{#has_custom_answers}}
                        <h5 class="graph-subtitle">Détails des réponses 'Autres' : </h5>
                        {{#responses}}
                            {{#custom_answer}}
                            <div class="response">
                                {{^anonymous}}
                                <span class="eight inline">
                                    <span class="four inline">{{date_response}}</span>
                                    <span class="inline">{{responder_name}}</span>
                                </span>
                                {{/anonymous}}
                                {{#anonymous}}
                                <span class="four inline">{{date_response}}</span>
                                {{/anonymous}}
                                <span>{{{custom_answer}}}</span>
                            </div>
                            {{/custom_answer}}
                        {{/responses}}
                        {{/has_custom_answers}}
                    {{/type_graph}}
                </div>
                {{/question_type}}
            </div>
        {{/is_question}}

        {{^is_question}}
            <div class="section nobreakpage">
                <h4 class="top">{{title}}</h4>
                <div class="description">
                    {{#description}}{{{description}}}{{/description}}
                    <em>{{^description}}Pas de description{{/description}}</em>
                </div>
            </div>

            {{#questions}}
            <div class="question nobreakpage">
                <h4>
                    {{title}}{{#mandatory}}<span style="color:red;margin-left:10px">*</span>{{/mandatory}}
                </h4>

                {{#question_type}}
                <div class="main">
                    {{#type_freetext}}
                    <div class="response">{{{statement}}}</div>
                    {{/type_freetext}}

                    {{#type_text}}
                    {{#responses}}
                    <div class="response">
                        {{^anonymous}}
                        <span class="eight inline">
                            <span class="four inline">{{date_response}}</span>
                            <span class="inline">{{responder_name}}</span>
                        </span>
                        {{/anonymous}}
                        {{#anonymous}}
                        <span class="four inline">{{date_response}}</span>
                        {{/anonymous}}
                        <span>
                            {{#filename}}{{filename}}{{/filename}}
                            {{^filename}}{{{answer}}}{{/filename}}
                        </span>
                    </div>
                    {{/responses}}
                    {{/type_text}}

                    {{#type_graph}}
                        <div class="response">
                            <span><img src="{{graphData}}" alt="Graph"/></span>
                        </div>
                        {{#is_cursor}}
                        <h5 class="graph-subtitle">Moyenne des réponses : {{cursor_average}}</h5>
                        {{/is_cursor}}
                        {{#has_custom_answers}}
                        <h5 class="graph-subtitle">Détails des réponses 'Autres' : </h5>
                        {{#responses}}
                            {{#custom_answer}}
                            <div class="response">
                                {{^anonymous}}
                                <span class="eight inline">
                                    <span class="four inline">{{date_response}}</span>
                                    <span class="inline">{{responder_name}}</span>
                                </span>
                                {{/anonymous}}
                                {{#anonymous}}
                                <span class="four inline">{{date_response}}</span>
                                {{/anonymous}}
                                <span>{{{custom_answer}}}</span>
                            </div>
                            {{/custom_answer}}
                        {{/responses}}
                        {{/has_custom_answers}}
                    {{/type_graph}}
                </div>
                {{/question_type}}
            </div>
            {{/questions}}
        {{/is_question}}
    {{/form_elements}}
</body>
</html>